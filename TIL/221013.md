## Firebase å°å…¥
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
[Flutter ã‚¢ãƒ—ãƒªã« Firebase ã‚’è¿½åŠ ã™ã‚‹](https://firebase.google.com/docs/flutter/setup?hl=ja&platform=ios)


### ã‚¨ãƒ©ãƒ¼é›†
```bash
flutter clean
flutter pub get
cd ios
pod install --repo-update
```
ã‚ªãƒ—ã‚·ãƒ§ãƒ³è©³ç´°
[CocoaPods Guides - Command-line Reference](https://guides.cocoapods.org/terminal/commands.html#pod_install)
- [ã€Flutterã€‘ã‚¨ãƒ©ãƒ¼ Could not build the application for the simulator è§£æ±ºæ‰‹é †](https://zenn.dev/ryouhei_furugen/articles/853959a06886da)
- [ã€Flutterã€‘No Podfile found in the project directoryã®å¯¾å‡¦æ³•](https://zenn.dev/ryouhei_furugen/articles/853959a06886da)

```
Error output from CocoaPods:
â†³
[!] Automatically assigning platform `iOS` with version `8.0` on target `Runner` because no platform was
specified. Please specify a platform for this target in your Podfile. See
`https://guides.cocoapods.org/syntax/podfile.html#platform`.
Error running pod install
```
- [flutter ã® Error ã§ CocoaPods specify a platform ã¨ã‹å‡ºãŸã¨ãã®å¯¾å‡¦](https://zenn.dev/junki555/articles/8d0b962d2e6c1fa4d8ca)
- [Flutter: CocoaPodã‹ã‚‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ã«èµ·ããŸã‚¨ãƒ©ãƒ¼ã®å¯¾å‡¦ - Qiita](https://qiita.com/kokikudo/items/ddc6552df4fb71328a99)
- [Flutterã€€iOSå®Ÿæ©Ÿæ¥ç¶šã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã¨ãã®å¯¾å‡¦æ³• | halzo appdev blog](https://halzoblog.com/flutter-ios-device/)
- [&#39;GoogleUtilities/GULAppEnvironmentUtil.h&#39; file not found, build failing in iOS Â· Issue #22071 Â· flutter/flutter Â· GitHub
](https://github.com/flutter/flutter/issues/22071)

### `[!] The FlutterFire plugin cloud_firestore for macOS requires a macOS deployment target of 10.12 or later.` ã®ã‚¨ãƒ©ãƒ¼
ğŸ“„ ./ios/Podfile
```
# Uncomment this line to define a global platform for your project
platform :ios, '11.0' ## ã“ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã—ãŸ
```

```bash
cd ios
rm Podfile.lock
pod install --repo-update
```

### ãƒ“ãƒ«ãƒ‰ãŒçµ‚ã‚ã‚‰ãªã„
ä¸‹è¨˜ã‚’è¿½åŠ ã€‚
ğŸ“„ ./ios/Podfile
```
target 'Runner' do
  pod 'FirebaseFirestore', :git => 'https://github.com/invertase/firestore-ios-sdk-frameworks.git', :tag => '9.3.0' // è¿½åŠ 

  use_frameworks!
  use_modular_headers!
  ...
end
```
> Firestoreã®iOS SDKã¯50ä¸‡è¡Œã®C++ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã€ã“ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã‚‹ã¨ã®ã“ã¨ã€‚ä¸Šè¨˜ã®ãƒ„ãƒ¼ãƒ«ã§ã¯ã€ãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸFirestoreã®iOS SDK xcframework ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ã®ã§ã€ãã®åˆ†ãƒ“ãƒ«ãƒ‰ãŒæ—©ããªã‚‹ã‚ˆã†ã ã€‚
[Firestoreã‚’ä½¿ã£ã¦ã„ã‚‹Flutterã‚¢ãƒ—ãƒªã®iOSãƒ“ãƒ«ãƒ‰ã‚’å°‘ã—ã ã‘æ—©ãã™ã‚‹](https://blog.okaryo.io/20220820-ios-build-performance-improvement-in-flutter-using-firestore)

ã‚‰ã—ã„

```bash
cd ios
rm Podfile.lock
pod install --repo-update
flutter clean
```
[Flutter ã§ CocoaPods&#x27;s specs repository is too out-of-date to satisfy dependencies ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã™ã‚‹](https://zenn.dev/arrow/scraps/55c95492c53b8c)


### main.dartã« `await Firebase.initializeApp();` ã‚’è¿½åŠ ã—ãŸã‚‰ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã€‚
```
Unhandled Exception: Binding has not yet been initialized.
The "instance" getter on the ServicesBinding binding mixin is only available once that binding has been initialized.
```


ã“ã‚Œã§è¡Œã‘ãŸ
```dart
  WidgetsFlutterBinding.ensureInitialized(); // è¿½åŠ 

  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
```
[æ–°è¦Flutterã‚¢ãƒ—ãƒª](https://zenn.dev/rytskywlkr/scraps/c03717eb2a0ca3)


### Android ã§ã‚¨ãƒ©ãƒ¼
[ã€Flutterã‚¨ãƒ©ãƒ¼è§£æ±ºæ³•ã€‘&#8221;uses-sdk:minSdkVersion 16 cannot be smaller than version 19 declared in library&#8221; ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã¨ãã®å¯¾å‡¦æ³• | Programmable](https://www.mechengjp.com/%E3%80%90flutter%E3%82%A8%E3%83%A9%E3%83%BC%E8%A7%A3%E6%B1%BA%E6%B3%95%E3%80%91uses-sdkminsdkversion-16-cannot-be-smaller-than-version-19-declared-in-library-%E3%81%A8%E3%81%84%E3%81%86%E3%82%A8/)

```bash
Launching lib/main.dart on sdk gphone64 x86 64 in debug mode...
lib/main.dart:1
/Users/onishi_yui/StudioProjects/testing_app/android/app/src/debug/AndroidManifest.xml Error:
	uses-sdk:minSdkVersion 16 cannot be smaller than version 19 declared in library [:cloud_firestore] /Users/onishi_yui/StudioProjects/testing_app/build/cloud_firestore/intermediates/merged_manifest/debug/AndroidManifest.xml as the library might be using APIs not available in 16
	Suggestion: use a compatible library with a minSdk of at most 16,
		or increase this project's minSdk version to at least 19,
		or use tools:overrideLibrary="io.flutter.plugins.firebase.firestore" to force usage (may lead to runtime failures)

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:processDebugMainManifest'.
> Manifest merger failed : uses-sdk:minSdkVersion 16 cannot be smaller than version 19 declared in library [:cloud_firestore] /Users/onishi_yui/StudioProjects/testing_app/build/cloud_firestore/intermediates/merged_manifest/debug/AndroidManifest.xml as the library might be using APIs not available in 16
  	Suggestion: use a compatible library with a minSdk of at most 16,
  		or increase this project's minSdk version to at least 19,
  		or use tools:overrideLibrary="io.flutter.plugins.firebase.firestore" to force usage (may lead to runtime failures)

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --info or --debug option to get more log output.
> Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 1m 54s
â”Œâ”€ Flutter Fix â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ The plugin cloud_firestore requires a higher Android SDK version.                             â”‚
â”‚ Fix this issue by adding the following to the file                                            â”‚
â”‚ /Users/onishi_yui/StudioProjects/testing_app/android/app/build.gradle:                        â”‚
â”‚ android {                                                                                     â”‚
â”‚   defaultConfig {                                                                             â”‚
â”‚     minSdkVersion 19                                                                          â”‚
â”‚   }                                                                                           â”‚
â”‚ }                                                                                             â”‚
â”‚                                                                                               â”‚
â”‚ Note that your app won't be available to users running Android SDKs below 19.                 â”‚
â”‚ Alternatively, try to find a version of this plugin that supports these lower versions of the â”‚
â”‚ Android SDK.                                                                                  â”‚
â”‚ For more information, see:                                                                    â”‚
â”‚ https://docs.flutter.dev/deployment/android#reviewing-the-build-configuration                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Exception: Gradle task assembleDebug failed with exit code 1

```

## `GoogleService-Info.plist` ã¨ã‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã€gitignor ã™ã¹ãã‹ã©ã†ã‹
- [Firebase apiKey ã£ã¦ã•ã‚‰ã—ã¦ã„ã„ã®? ã»ã‚“ã¨ã«? - Qiita](https://qiita.com/hoshymo/items/e9c14ed157200b36eaa5)

- https://twitter.com/_mono/status/1087680944612339713
> api keyãªã©å«ã‚€æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã¯æ™’ã—ã¦OKğŸ™†â€â™€ï¸
> - google-services.json (Android)
> - GoogleService-Info.plist (iOS)
> - Webã§scriptã‚¿ã‚°ã«åŸ‹ã‚è¾¼ã‚€configã®å€¤
> ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç§˜å¯†éµã‚’å«ã‚€ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¯çµ¶å¯¾ã«æ¼ã‚Œãªã„ã‚ˆã†ã«ğŸ™…â€â™€ï¸
> - serviceAccountKey.json (Admin SDK)


## ã‚‚ã‚ã‚‚ã‚å‚è€ƒ
[Flutter2.8ä»¥é™ã®Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸè¨­å®šæ–¹æ³• | halzo appdev blog](https://halzoblog.com/flutter-firebase-setting2/)
