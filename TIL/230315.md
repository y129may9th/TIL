# ãƒ­ãƒ¼ã‚«ãƒ«ã§ CloudFunctions å®Ÿè¡Œç’°å¢ƒã‚’ä½œã‚‹ - Functions Framework -

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: [ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™º &nbsp;|&nbsp; Google Cloud Functions ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://cloud.google.com/functions/docs/running/overview?hl=ja)

## Node.js

- Node.js ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
asdf install nodejs 18.15.0

# Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
$ node -v
v18.15.0

# npm ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
$ npm -v
9.5.0
```

## Functions Framework å°å…¥

- é–¢æ•°ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã€ä½¿ç”¨ã™ã‚‹è¨€èªã® Functions Framework ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

```bash
npm install --save-dev @google-cloud/functions-framework
```

- watch ã¨ã‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆç·¨é›†

```json
"scripts": {
   ...
   "compile": "tsc",
   "debug": "node --inspect node_modules/.bin/functions-framework --source=build/src/ --target=index",
   "watch": "concurrently \"npm run compile -- --watch\" \"nodemon --watch ./build/ --exec npm run debug\"",
   ...
}
```

- å®Ÿè¡Œ

```bash
npm start
npm run watch
```

### ä½™è«‡

#### [concurrently - npm](https://www.npmjs.com/package/concurrently) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- npm ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¸¦åˆ—ã§å®Ÿè¡Œã§ãã‚‹ã€‚
  - [npmã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¸¦åˆ—ã§å®Ÿè¡Œã—ãŸã„ - iOSã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã¤ã¶ã‚„ã](https://yamatooo.blog/entry/2021/06/17/083000)

#### MySQL

- æ¥ç¶šæƒ…å ±ã¿ãŸã„ã¨ã
  - [MySQLã‚µãƒ¼ãƒãƒ¼æƒ…å ±å–å¾—ï½œã‚µãƒ¼ãƒãƒ¼é–¢é€£ï½œMySQLï½œPHP &amp; JavaScript Room](https://phpjavascriptroom.com/?t=mysql&p=info)

```mysql
mysql> \s <Enter>
--------------
mysql  Ver 12.22 Distrib 4.0.26, for Win32 (ia32)

Connection id:          6
Current database:
Current user:           root@localhost
SSL:                    Not in use
Server version:         4.0.26-nt
Protocol version:       10
Connection:             localhost via TCP/IP
Client characterset:    sjis
Server characterset:    sjis
TCP port:               3306
Uptime:                 2 hours 38 min 37 sec

Threads: 2  Questions: 1841  Slow queries: 0  Opens: 6  Flush tables: 1  Open tables: 0  Queries per second avg: 0.193
--------------
```

## MySQL æ¥ç¶š

- ã‚³ãƒ³ãƒ†ãƒŠã§ MySQL ç«‹ã¦ãŸ
  - å‰²æ„›ã™ã‚‹ã®ã§å‚è€ƒè¨˜äº‹â†“
    - [ã€Node.jsã€‘ Dockerã‚’ç”¨ã„ã¦Node.js Express MySQLã®ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã¾ã§ã®é“ã®ã‚Š - Qiita](https://qiita.com/sho_U/items/0ef3dfc7b07b5e13fa18)
    - [Node.js + MySQLã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Dockerä¸Šã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ | ã¿ã‚“ãŸã](https://mintaku-blog.net/docker-nodejs/)

- [promise-mysql](https://www.npmjs.com/package/promise-mysql) ã®å°å…¥
  - [Cloud Functions ã‹ã‚‰æ¥ç¶šã™ã‚‹ | Cloud SQL for MySQL | Google Cloud](https://cloud.google.com/sql/docs/mysql/connect-functions?hl=ja#node.js) å…¬å¼ã§ä½¿ã£ã¦ã„ãŸã‹ã‚‰ã“ã‚Œã«ã—ã¦ã¿ãŸã€‚
  - å‚è€ƒ
    - [Promise-mysqlã§ã€Node.jsã‹ã‚‰MySQLã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ - CLOVERğŸ€](https://kazuhira-r.hatenablog.com/entry/20180808/1533730267)
    - [Google Cloud Platformä¸Šã§Node.jsã¨MySQLã‚’ç¹‹ã’ã¦ã¿ãŸ - Qiita](https://qiita.com/natsuozawa/items/9f68aa20078e90dc0a92)
    - [Debugging NodeJS Google Cloud Functions Locally with Functions Framework in VSCode | by GajiGesa Groovers ğŸ¤© | Medium](https://medium.com/@gajigesa/debugging-nodejs-google-cloud-functions-locally-with-functions-framework-in-vscode-6bd401dd85ac)


- select ã‚¯ã‚¨ãƒªå®Ÿè¡Œ
  - å‚è€ƒ
    - [HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆçµŒç”±ã§é–¢æ•°ã‚’å‘¼ã³å‡ºã™ | Cloud Functions for Firebase](https://firebase.google.com/docs/functions/http-events?hl=ja)
    -

<details>
  <summary>çµæœ</summary>

```bash
[onishi_yui@16PCM-11:~/repos/playgroud-functions/functions]+[feat/connect-mysql]$ npm start

> start
> npx functions-framework --target=helloWorld --signature-type=http

{"severity":"WARNING","message":"Warning, FIREBASE_CONFIG and GCLOUD_PROJECT environment variables are missing. Initializing firebase-admin will fail"}
Serving function...
Function: helloWorld
Signature type: http
URL: http://localhost:8080/
===== returnContext.record ======
{
  message: 'å–å¾—æˆåŠŸã—ã¾ã—ãŸã€‚',
  record: [
    RowDataPacket {
      id: 10,
      email: 'amurayama@example.org',
      created_at: 2023-03-15T05:53:39.000Z,
      updated_at: 2023-03-15T05:53:39.000Z,
      status: 1,
      type: 0,
      lastname: 'å¤§å£',
      firstname: 'ç¿¼',
      lastname_kana: 'ç¬¹ç”°',
      firstname_kana: 'èˆ',
      sex: 2,
      birthday: 2004-03-22T15:00:00.000Z,
      zipcode: '8690235',
      prefecture_id: 14,
      city_id: '17207',
      address: '7068239  æ±äº¬éƒ½æ¾æœ¬å¸‚å—åŒºå·¥è—¤ç”ºæœ¨æ‘1-5-2 ãƒã‚¤ãƒ„å±±å²¸104å·',
      building: 'åŸç”°å¸‚104',
      tel: '03-9304-7508',
      opening_fund: 1000,
      opening_time: 2,
      opening_area: 1,
      deleted_at: null,
      yearly_income: 200,
      last_login_at: 1999-08-05T15:00:00.000Z,
      uid: null
    }
  ],
  data: <ref *1> IncomingMessage {
    _readableState: ReadableState {
      objectMode: false,
      highWaterMark: 16384,
      buffer: BufferList { head: null, tail: null, length: 0 },
      length: 0,
      pipes: [],
      flowing: null,
      ended: true,
      endEmitted: false,
      reading: false,
      constructed: true,
      sync: true,
      needReadable: false,
      emittedReadable: false,
      readableListening: false,
      resumeScheduled: false,
      errorEmitted: false,
      emitClose: true,
      autoDestroy: true,
      destroyed: false,
      errored: null,
      closed: false,
      closeEmitted: false,
      defaultEncoding: 'utf8',
      awaitDrainWriters: null,
      multiAwaitDrain: false,
      readingMore: true,
      dataEmitted: false,
      decoder: null,
      encoding: null,
      [Symbol(kPaused)]: null
    },
    _events: [Object: null prototype] {},
    _eventsCount: 0,
    _maxListeners: undefined,
    socket: Socket {
      connecting: false,
      _hadError: false,
      _parent: null,
      _host: null,
      _closeAfterHandlingError: false,
      _readableState: [ReadableState],
      _events: [Object: null prototype],
      _eventsCount: 8,
      _maxListeners: undefined,
      _writableState: [WritableState],
      allowHalfOpen: true,
      _sockname: null,
      _pendingData: null,
      _pendingEncoding: '',
      server: [Server],
      _server: [Server],
      parser: [HTTPParser],
      on: [Function: socketListenerWrap],
      addListener: [Function: socketListenerWrap],
      prependListener: [Function: socketListenerWrap],
      setEncoding: [Function: socketSetEncoding],
      _paused: false,
      _httpMessage: [ServerResponse],
      [Symbol(async_id_symbol)]: 18,
      [Symbol(kHandle)]: [TCP],
      [Symbol(lastWriteQueueSize)]: 0,
      [Symbol(timeout)]: null,
      [Symbol(kBuffer)]: null,
      [Symbol(kBufferCb)]: null,
      [Symbol(kBufferGen)]: null,
      [Symbol(kCapture)]: false,
      [Symbol(kSetNoDelay)]: true,
      [Symbol(kSetKeepAlive)]: false,
      [Symbol(kSetKeepAliveInitialDelay)]: 0,
      [Symbol(kBytesRead)]: 0,
      [Symbol(kBytesWritten)]: 0
    },
    httpVersionMajor: 1,
    httpVersionMinor: 1,
    httpVersion: '1.1',
    complete: true,
    rawHeaders: [
      'Host',
      'localhost:8080',
      'Connection',
      'keep-alive',
      'sec-ch-ua',
      '"Google Chrome";v="111", "Not(A:Brand";v="8", "Chromium";v="111"',
      'sec-ch-ua-mobile',
      '?0',
      'sec-ch-ua-platform',
      '"macOS"',
      'Upgrade-Insecure-Requests',
      '1',
      'User-Agent',
      'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36',
      'Accept',
      'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
      'Sec-Fetch-Site',
      'none',
      'Sec-Fetch-Mode',
      'navigate',
      'Sec-Fetch-User',
      '?1',
      'Sec-Fetch-Dest',
      'document',
      'Accept-Encoding',
      'gzip, deflate, br',
      'Accept-Language',
      'ja,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6',
      'Cookie',
      '_ga=GA1.1.1558376240.1646303377; CL_p-hoge=cid-hoge; ACT_p-hoge=js; CL_phoge=cidhoge; PL_phoge=plidhoge; APT_phoge=php; ACT_phoge=js; ACT_hoge=js; ACT_hogehoge=js; tmpAddCenterId=26; _ga_FB0BS5S90K=GS1.1.1665624349.12.0.1665624349.0.0.0; prefId=13; tmpPrefId=13; recommendClientIds=30%2C8%2C478; _im_id.1013489=21ad1fa8077a63f7.1676442093.; _uetvid=e5ad1b90b25a11edb3655d690609712c; _gcl_au=1.1.1794440741.1678866432; _gid=GA1.1.450098300.1678866433; _clck=1kmoubi|1|f9x|0; _uetsid=9aa72a40c30511edafec19f1b4be4ec5; class_room_ids=228,243; _clsk=1ipv29y|1678867752213|49|1|q.clarity.ms/collect; _ga_11R9D8WWW7=GS1.1.1678866432.743.1.1678867764.8.0.0'
    ],
    rawTrailers: [],
    joinDuplicateHeaders: undefined,
    aborted: false,
    upgrade: false,
    url: '/',
    method: 'GET',
    statusCode: null,
    statusMessage: null,
    client: Socket {
      connecting: false,
      _hadError: false,
      _parent: null,
      _host: null,
      _closeAfterHandlingError: false,
      _readableState: [ReadableState],
      _events: [Object: null prototype],
      _eventsCount: 8,
      _maxListeners: undefined,
      _writableState: [WritableState],
      allowHalfOpen: true,
      _sockname: null,
      _pendingData: null,
      _pendingEncoding: '',
      server: [Server],
      _server: [Server],
      parser: [HTTPParser],
      on: [Function: socketListenerWrap],
      addListener: [Function: socketListenerWrap],
      prependListener: [Function: socketListenerWrap],
      setEncoding: [Function: socketSetEncoding],
      _paused: false,
      _httpMessage: [ServerResponse],
      [Symbol(async_id_symbol)]: 18,
      [Symbol(kHandle)]: [TCP],
      [Symbol(lastWriteQueueSize)]: 0,
      [Symbol(timeout)]: null,
      [Symbol(kBuffer)]: null,
      [Symbol(kBufferCb)]: null,
      [Symbol(kBufferGen)]: null,
      [Symbol(kCapture)]: false,
      [Symbol(kSetNoDelay)]: true,
      [Symbol(kSetKeepAlive)]: false,
      [Symbol(kSetKeepAliveInitialDelay)]: 0,
      [Symbol(kBytesRead)]: 0,
      [Symbol(kBytesWritten)]: 0
    },
    _consuming: false,
    _dumped: false,
    next: [Function: next],
    baseUrl: '',
    originalUrl: '/',
    _parsedUrl: Url {
      protocol: null,
      slashes: null,
      auth: null,
      host: null,
      port: null,
      hostname: null,
      hash: null,
      search: null,
      query: null,
      pathname: '/',
      path: '/',
      href: '/',
      _raw: '/'
    },
    params: { '0': '' },
    query: {},
    res: ServerResponse {
      _events: [Object: null prototype],
      _eventsCount: 2,
      _maxListeners: undefined,
      outputData: [],
      outputSize: 0,
      writable: true,
      destroyed: false,
      _last: false,
      chunkedEncoding: false,
      shouldKeepAlive: true,
      maxRequestsOnConnectionReached: false,
      _defaultKeepAlive: true,
      useChunkedEncodingByDefault: true,
      sendDate: true,
      _removedConnection: false,
      _removedContLen: false,
      _removedTE: false,
      strictContentLength: false,
      _contentLength: null,
      _hasBody: true,
      _trailer: '',
      finished: false,
      _headerSent: false,
      _closed: false,
      socket: [Socket],
      _header: null,
      _keepAliveTimeout: 5000,
      _onPendingData: [Function: bound updateOutgoingData],
      req: [Circular *1],
      _sent100: false,
      _expect_continue: false,
      _maxRequestsPerSocket: 0,
      locals: [Object: null prototype],
      __onFinished: [Function],
      [Symbol(kCapture)]: false,
      [Symbol(kBytesWritten)]: 0,
      [Symbol(kEndCalled)]: false,
      [Symbol(kNeedDrain)]: false,
      [Symbol(corked)]: 0,
      [Symbol(kOutHeaders)]: null,
      [Symbol(errored)]: null,
      [Symbol(kUniqueHeaders)]: null
    },
    body: {},
    route: Route { path: '/*', stack: [Array], methods: [Object] },
    [Symbol(kCapture)]: false,
    [Symbol(kHeaders)]: {
      host: 'localhost:8080',
      connection: 'keep-alive',
      'sec-ch-ua': '"Google Chrome";v="111", "Not(A:Brand";v="8", "Chromium";v="111"',
      'sec-ch-ua-mobile': '?0',
      'sec-ch-ua-platform': '"macOS"',
      'upgrade-insecure-requests': '1',
      'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36',
      accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
      'sec-fetch-site': 'none',
      'sec-fetch-mode': 'navigate',
      'sec-fetch-user': '?1',
      'sec-fetch-dest': 'document',
      'accept-encoding': 'gzip, deflate, br',
      'accept-language': 'ja,en-US;q=0.9,en;q=0.8,zh-CN;q=0.7,zh;q=0.6',
      cookie: '_ga=GA1.1.1558376240.1646303377; CL_p-hoge=cid-hoge; ACT_p-hoge=js; CL_phoge=cidhoge; PL_phoge=plidhoge; APT_phoge=php; ACT_phoge=js; ACT_hoge=js; ACT_hogehoge=js; tmpAddCenterId=26; _ga_FB0BS5S90K=GS1.1.1665624349.12.0.1665624349.0.0.0; prefId=13; tmpPrefId=13; recommendClientIds=30%2C8%2C478; _im_id.1013489=21ad1fa8077a63f7.1676442093.; _uetvid=e5ad1b90b25a11edb3655d690609712c; _gcl_au=1.1.1794440741.1678866432; _gid=GA1.1.450098300.1678866433; _clck=1kmoubi|1|f9x|0; _uetsid=9aa72a40c30511edafec19f1b4be4ec5; class_room_ids=228,243; _clsk=1ipv29y|1678867752213|49|1|q.clarity.ms/collect; _ga_11R9D8WWW7=GS1.1.1678866432.743.1.1678867764.8.0.0'
    },
    [Symbol(kHeadersCount)]: 30,
    [Symbol(kTrailers)]: null,
    [Symbol(kTrailersCount)]: 0
  }
}
```

</details>

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2023-03-16 12 03 48](https://user-images.githubusercontent.com/44105111/225508620-b2dd09bd-bdb4-4b02-aaa7-9a336104b4b9.png)

- ãã®ã»ã‹
  - [dotenv - npm](https://www.npmjs.com/package/dotenv) ã®å°å…¥

## ãƒˆãƒ©ã‚·ãƒ¥ãƒ¼

### âš ï¸ dotenv ã®å‹ä¿®æ­£ã—ãŸã„

- <https://github.com/y129may9th/playground-functions/issues/4>

### âš ï¸ `getaddrinfo ENOTFOUND mysql` ã®ã‚¨ãƒ©ãƒ¼

- æ¥ç¶šæƒ…å ±ã‚’ä¿®æ­£ã—ã¦è§£æ±º
- [json - errorError: getaddrinfo ENOTFOUND - mysql - Stack Overflow](https://stackoverflow.com/questions/25521755/errorerror-getaddrinfo-enotfound-mysql)
- [MySQLã‚µãƒ¼ãƒãƒ¼æƒ…å ±å–å¾—ï½œã‚µãƒ¼ãƒãƒ¼é–¢é€£ï½œMySQLï½œPHP &amp; JavaScript Room](https://phpjavascriptroom.com/?t=mysql&p=info)

### âš ï¸ `ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested by server; consider upgrading MySQL client` ã®ã‚¨ãƒ©ãƒ¼

- [ã€node.jsã€‘MySQL8.0ã«æ¥ç¶šã§ããªã„ã€‚Error: ER_NOT_SUPPORTED_AUTH_MODE - ä¸­å …ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®å‚™å¿˜éŒ²](https://www.chuken-engineer.com/entry/2020/09/04/074216)

### âš ï¸ `TypeError: Converting circular structure to JSON` ã®ã‚¨ãƒ©ãƒ¼

```text
Converting circular structure to JSON --> starting at object with constructor 'Socket' | property 'parser' -> object with
constructor 'HTTPParser' --- property 'socket' closes the circle
```

- [JSON.stringifyã§`TypeError: Converting circular structure to JSON`ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸæ™‚ã®å¯¾å‡¦æ³• - Qiita](https://qiita.com/gazf/items/5c2a082e3cd3d85b4a10)

## å‚è€ƒ

- [ã€Node.jsã€‘ Dockerã‚’ç”¨ã„ã¦Node.js Express MySQLã®ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã¾ã§ã®é“ã®ã‚Š - Qiita](https://qiita.com/sho_U/items/0ef3dfc7b07b5e13fa18)
- [Cloud Functions ã®é–¢æ•°ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹æ–¹æ³•](https://cloud.google.com/blog/ja/topics/developers-practitioners/how-to-develop-and-test-your-cloud-functions-locally)
- [typescript + express + mysql ã§ç°¡æ˜“ webAPI ã‚µãƒ¼ãƒãƒ¼ä½œæˆ](https://zenn.dev/msksgm/articles/20211104-typeorm-express-mysql-api)

## POST ã—ãŸã„

```bash
$ npm start
curl -d '{"id": 10}' -X POST -H "Content-Type: application/json" http://localhost:8080 | jq
```

# Node.jsã§MySQL

- [GitHub - mysqljs/mysql: A pure node.js JavaScript Client implementing the MySQL protocol.](https://github.com/mysqljs/mysql)
- [Node.jsã§MySQLã‚’ä½¿ã†ãƒ¡ãƒ¢ - Qiita](https://qiita.com/PianoScoreJP/items/7ed172cd0e7846641e13)

### ã‚·ãƒ³ãƒ—ãƒ« SELECT

```ts
  const results = await connection.query("SELECT * FROM users WHERE id = 10");
```

### where å¥ä½¿ã†

```ts
  const results = await connection.query("SELECT * FROM users WHERE id = ?", [userId]);
```

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã«ãƒ—ãƒ¬ã‚¤ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ã†ã¨ã

- `??` ã‚’ä½¿ã†ã€‚

```ts
  const userId = 1;
  const columns = ['username', 'email'];
  let query = connection.query('SELECT ?? FROM ?? WHERE id = ?', [columns, 'users', userId], function(err, results) {
  // ...
});
```

### INSERT ã™ã‚‹

```ts
  const columns = [
    "email",
    "status",
    "last_name",
    "first_name",
    "birthday",
    "zipcode",
    ...
  ];
  const data = [
    params.email,
    params.status,
    params.last_name,
    params.first_name,
    params.birthday,
    params.zipcode,
    ...
  ];
  const results = await connection.query("INSERT INTO users (??) VALUES (?)", [columns, data]);
```

- å®Ÿè¡Œ

```bash
curl -d '{"email": "999@example.com","status": 1,"last_name": "å¤§å£","first_name": "ç¿¼","birthday": "2004-03-22","zipcode": "1050001", ...}' -X POST -H "Content-Type: application/json" <http://localhost:8080>  | jq
```

- ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```ts
```

- ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã¨ã‹
  - [node.jsã§MySQLã®ç–‘å•ç¬¦ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã«ã‚ˆã‚‹SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­– - Node.js/JavaScriptå…¥é–€](https://kaworu.jpn.org/javascript/node.js%E3%81%A7MySQL%E3%81%AE%E7%96%91%E5%95%8F%E7%AC%A6%E3%83%97%E3%83%AC%E3%83%BC%E3%82%B9%E3%83%9B%E3%83%AB%E3%83%80%E3%81%AB%E3%82%88%E3%82%8BSQL%E3%82%A4%E3%83%B3%E3%82%B8%E3%82%A7%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E5%AF%BE%E7%AD%96)

- timestamp ã©ã†ã‚„ã‚“ã®ï¼Ÿ

- `Variable 'X' is used before being assigned` ã®ã‚¨ãƒ©ãƒ¼
  - [Variable &#x27;X&#x27; is used before being assigned in TypeScript | bobbyhadz](https://bobbyhadz.com/blog/typescript-variable-is-used-before-being-assigned)
  - [TypeScript 2.7.1 å¤‰æ›´ç‚¹ - Qiita](https://qiita.com/vvakame/items/3a1e628e53a5dd99dfe0#%E5%A4%89%E6%95%B0%E6%9C%AB%E5%B0%BE%E3%81%AB--%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B%E3%81%93%E3%81%A8%E3%81%A7%E5%88%9D%E6%9C%9F%E5%8C%96%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%82%92%E5%89%B2%E6%84%9B%E3%81%A7%E3%81%8D%E3%82%8B)

### TS å‹‰å¼·ã—ã¦ã­

- object ã« map ã®å‡¦ç†ã‚’ã—ãŸã„ã ã¨ã‹
  - [TypeError: map is not a function in JavaScript [Solved] | bobbyhadz](https://bobbyhadz.com/blog/javascript-map-is-not-a-function)
  - [TypeError: &quot;x&quot; is not a function - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Not_a_function#function_called_on_the_wrong_object)
  - [TypeScriptã§ç©æ¥µçš„ã«Mapã‚’ä½¿ãŠã†ã€‚](https://zenn.dev/nana/articles/4f170f730f2358)

- å‹ã‚’èª¿ã¹ãŸã„
  - [Typescript ã§ å‹(æ§‹é€ ä½“) ã®ä¸€è‡´ã‚’åˆ¤å®šã™ã‚‹ (Class, Interface, Type)](https://zenn.dev/tktcorporation/articles/8757400a6aa0b40e64bd)

- Array é–¢é€£
  - [TypeScript - é…åˆ—ã«å€¤ã‚’è¿½åŠ ã™ã‚‹(å…ˆé ­ãƒ»æœ«å°¾ãƒ»ä½ç½®æŒ‡å®š)](https://www.curict.com/item/c2/c2d7ade.html)

## onCall() ä½¿ã„ãŸã„
- [ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§Cloud Functions for Firebaseï¼ˆç‰¹ã«Callableé–¢æ•°ï¼‰ã®å‹•ä½œãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ - Qiita](https://qiita.com/zaburo/items/9698ccb26dd4e0c37ab0)

# MySQL

## ãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ

> SQLæ–‡ã§å€¤ãŒã„ã¤ã§ã‚‚å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã€å¤‰æ›´ã™ã‚‹ç®‡æ‰€ã ã‘å¤‰æ•°ã®ã‚ˆã†ã«ã—ãŸå‘½ä»¤æ–‡ã‚’ä½œã‚‹ä»•çµ„ã¿ã®ã“ã¨

- [ãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã‚’åˆ©ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ï¼ - Qiita](https://qiita.com/wakahara3/items/d7a3674eecd3b021a21e)

- NodeJS ã® mySQL ã§ã‚‚ `format()` ã§åŒã˜ã‚ˆã†ãªã“ã¨ãŒã§ãã‚‹

```js
var sql = "SELECT * FROM ?? WHERE ?? = ?";
var inserts = ['users', 'id', userId];
sql = mysql.format(sql, inserts);
```
