# Shared preferences plugin
ドキュメント: https://pub.dev/packages/shared_preferences

## Valueで使用可能な型
```
- int型
- double型
- bool型
- String型
- String型のリスト
```

## 操作
- 削除
```dart
  // key を指定して削除
  await prefs.remove("keys");

  // すべての値をクリアする
  final bool ok = await prefs.clear();
```
## 参考
- [Flutterでデータを端末に保存する方法は？～Key-Valueでの値の保存とファイルへの保存～ (1/3)|CodeZine（コードジン）](https://codezine.jp/article/detail/16668)
- [FlutterでSharedPreferencesを使ってローカルにデータを保存する | virtualiment](https://virment.com/how-to-use-shared-preferences-in-flutter/)
- [Library: 端末にデータを保存する｜Flutterでよく使うライブラリまとめ &amp; これってどうやるの？](https://zenn.dev/web_tips/books/df8423bbb204a1/viewer/53e4ff)
- [【Flutter】SharedPreferencesでListデータを保存する方法【図解付き】 - Qiita](https://qiita.com/mamoru_takami/items/2d930ee927c048060741)


<br>

---

<br>
# Dart: `cast<R> method`
- List や Map の型を変更する
```dart
final List<String> foo = ['1', '2', '3'];
final baz = foo.cast<num>();
```

- 一つづつ変換する
```dart
import 'dart:convert';
void main() {
    var a = 10; // An integer
    var b = "20"; // A string
    var c = int.parse(b);
    print(a + c);
}
```
- `List<String>` -> `List<int>`
```dart
void main() {
  List<String> strs = <String>["11", "12", "5"];
  print(strs.runtimeType);

  List<int> numbers = strs.map(int.parse).toList();
  print(numbers.runtimeType);

  print(numbers);
}
-----
Output:
JSArray<String>
JSArray<int>
[11, 12, 5]
```

- `List<int>` -> `List<String>`
```dart
void main() {
  List<int> numbers = <int>[11, 12, 5];
  print(numbers.runtimeType);

  final List<String> strs = numbers.map((e) => e.toString()).toList();
  print(strs.runtimeType);

  print(strs);
}
-----
Output:
JSArray<int>
JSArray<String>
[11, 12, 5]
```

- なるべく避ける
[Effective Dart: Usage | Dart](https://dart.dev/guides/language/effective-dart/usage#avoid-using-cast)

<br>

---

<br>

# Map だの List だの
- **Map ↔️ List**
  - MapからIterable（繰り返し可能なオブジェクト）にしたMapEntryへ変換
    ```dart
    Map<<int, int>> mapData = {0: 10, 1: 8, 2: 6, 3: 4, 4: 2, 5: 0};
    Iterable<MapEntry<int, int>> mapEntryData = mapData.entries;
    // (MapEntry(0: 0), MapEntry(1: 2), MapEntry(2: 4), ..., MapEntry(4: 8), MapEntry(5: 10))
    ```
  - MapEntryでは情報を.keyや.valueだけで取得できてわかりやすいコードになる
    ```dart
    Iterable<MapEntry<int, int>> mapEntryData2 = mapEntryData.where((e) => (e.value != 2)).toList();
    // [MapEntry(0: 0), MapEntry(2: 4), MapEntry(3: 6), MapEntry(4: 8), MapEntry(5: 10)]
    ```

- **List から Map**
    ```dart
    List<int> data = [0, 2, 4, 6, 8, 10];
    Map<int, int> mapData = data.asMap();
    // {0: 10, 1: 8, 2: 6, 3: 4, 4: 2, 5: 0}
    ```

- よむ
  - [【Flutter / Dart】ListからMapへ変換し、そのMapを操作する方法](https://zenn.dev/mukkun69n/articles/6c281446c32838)
  - [【Dart】まだ暗記してるの？ DartのListとMapのメソッド一覧](https://zenn.dev/web_tips/articles/8d7c2dc7810806)
  - [FlutterのDropdownButtonとDropdownMenuItemを最大限利用してみた件 - Qiita](https://qiita.com/slovenly_engineer/items/650c463e1675370ad86e)
  - [【Flutter】MapとMapEntryの違いとは？｜Flutterラボ｜note](https://note.com/hatchoutschool/n/nf5e52b909f56)
  - [【Flutter/Dart】Map型のチートシート](https://zenn.dev/mukkun69n/articles/7ac3f1a9111cad)
  - [【Dart】List,Set,Mapの便利な関数](https://zenn.dev/iwaku/articles/2020-12-27-iwaku)
  - [反復処理 – Dart逆引きリファレンス | DevelopersIO](https://dev.classmethod.jp/articles/dart_reference_iterators/)



<br>

---

<br>
