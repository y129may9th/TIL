## マイクロサービス

[[セッションレポート]NetflixにおけるMicroservicesアーキテクチャ ](https://dev.classmethod.jp/cloud/aws/netflix-microservices-architecture/)

スケールアップに伴い

- エンジニア増える
- コードが複雑化
- 使いたいテクノロジが違う（IDE・言語）
- デプロイに時間がかかる
- 変更があると、どこに影響するかわからない
- コンポーネントを個別にスケールできなくなる
- 可用性
  - どこかに問題があるとすべてが停止する



### Microservices

- 一つの責任範囲を持つそれぞれが明確なリーダーシップの範囲をもつ
- DevOpsで責任をもつ
- 疎結合
  - スピードアップ
  - 個別に自由にエンジニアリング
  - ツール・言語の選択
  - 可用性の確保（あるサービスが落ちても頬化のサービスに影響をあたえない）
  - 複数のサービスの連結

課題

### SideCar

- それぞれのマイクロサービスを制御するルールが必要

- 運用面の課題


### Eureka (Registryサービス)

- 多くのサービスをどう使うか
- サービスの管理

### キャッシュの活用

- 一つのリクエストが複数のサービスに分散される
- たくさんのトラフィックが発生

### 一番初めにサービスを使ったときにHTTPヘッダに埋め込んで渡していく

- さまざまなアプリケーションから依存されているサービス（ホットスポット）
- サービスの問い合わせ回数を減らす

### AWSのAutoScaling

- リクエストが増えた場合のスケーリング
  - フロントのサービスだけスケールするわけにはいかない
  - 依存される、連結するサービスもスケールする必要がある
- Microserviceを自動スケール
  - 予測型オートスケールも使うことができる

### ロードバランサ

- フロントはELB
  - パブリックなELB
- 内部はソフトウェアLB
  - Ribbon

### Simian Army

インスタンスをランダムに殺していくテスト

